<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>Merge PDF Files Free - Secure Offline Tool (No Uploads)</title>
    <meta name="description" content="Combine multiple PDF files into one document instantly. 100% private processing in your browser. No file uploads, no server, secure & free.">
    <meta name="keywords" content="merge pdf offline, secure pdf combiner, join pdfs locally, client-side pdf merger, free pdf tool no upload">
    
    <meta property="og:title" content="Secure PDF Merger - 100% Offline & Private">
    <meta property="og:description" content="Merge your documents without sending them to any server. Fast, Free, and Private.">
    <meta property="og:type" content="website">

    <style>
        :root {
            --primary: #2563eb;
            --primary-dark: #1d4ed8;
            --success: #10b981;
            --bg: #f8fafc;
            --text: #1e293b;
            --premium-bg: #fff1f2;
            --premium-border: #fda4af;
            --premium-text: #be123c;
            --delete: #ef4444;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
        }

        .container {
            max-width: 700px;
            width: 100%;
            background: white;
            padding: 40px;
            border-radius: 16px;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1);
        }

        header { text-align: center; margin-bottom: 30px; }
        h1 { font-size: 2rem; color: #0f172a; margin-bottom: 10px; }
        .subtitle { color: #64748b; font-size: 1.1rem; }
        .badge {
            background: #dbeafe; color: #1e40af; 
            padding: 4px 12px; border-radius: 20px; 
            font-size: 0.85rem; font-weight: 600;
            display: inline-block; margin-top: 10px;
        }

        /* DRAG & DROP ZONE */
        .drop-zone {
            border: 2px dashed #cbd5e1;
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8fafc;
            position: relative;
        }
        
        .drop-zone:hover, .drop-zone.dragover {
            border-color: var(--primary);
            background: #eff6ff;
        }

        .drop-zone p { font-size: 1.1rem; color: #475569; margin-top: 15px; }
        .drop-icon { font-size: 40px; color: #94a3b8; }
        
        /* Hidden input allows clicking the box */
        #file-input {
            position: absolute; width: 100%; height: 100%; top: 0; left: 0;
            opacity: 0; cursor: pointer;
        }

        /* FILE LIST */
        #file-list-container {
            margin-top: 20px;
            text-align: left;
        }
        .file-item {
            background: #f1f5f9;
            padding: 12px 15px;
            margin-bottom: 8px;
            border-radius: 6px;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid #e2e8f0;
        }
        .file-info { display: flex; align-items: center; gap: 10px; overflow: hidden; }
        .file-name { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 300px; font-weight: 500; }
        .file-size { color: #64748b; font-size: 0.8em; }
        
        /* DELETE BUTTON */
        .btn-delete {
            background: transparent; border: none; color: var(--delete);
            cursor: pointer; font-weight: bold; font-size: 1.2rem;
            padding: 0 10px; transition: color 0.2s;
        }
        .btn-delete:hover { color: #b91c1c; transform: scale(1.1); }

        /* MERGE BUTTON */
        .btn-merge {
            width: 100%;
            background: var(--primary);
            color: white;
            border: none;
            padding: 16px;
            font-size: 1.2rem;
            font-weight: bold;
            border-radius: 8px;
            cursor: pointer;
            margin-top: 25px;
            transition: background 0.2s;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
        }
        .btn-merge:hover { background: var(--primary-dark); }
        .btn-merge:disabled { background: #94a3b8; cursor: not-allowed; }

        /* STATUS & LOGS */
        #status { margin-top: 15px; text-align: center; font-weight: 500; min-height: 24px; }
        .error { color: #ef4444; }
        .success { color: var(--success); }

        /* PREMIUM CARD (ADOBE) */
        .premium-card {
            margin-top: 40px;
            background: linear-gradient(to right, #fff1f2, #fff);
            border: 1px solid var(--premium-border);
            padding: 20px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
        }
        .premium-text h3 { color: var(--premium-text); font-size: 1.1rem; margin-bottom: 5px; }
        .premium-text p { font-size: 0.9rem; color: #881337; }
        
        .btn-affiliate {
            background: #e11d48;
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 6px;
            font-weight: bold;
            font-size: 0.95rem;
            transition: transform 0.2s;
            white-space: nowrap;
        }
        .btn-affiliate:hover { transform: translateY(-2px); box-shadow: 0 4px 12px rgba(225, 29, 72, 0.2); }

        footer { margin-top: 40px; font-size: 0.8rem; color: #94a3b8; text-align: center; }
        
        @media (max-width: 600px) {
            .container { padding: 20px; }
            .premium-card { flex-direction: column; text-align: center; }
            .btn-affiliate { width: 100%; }
            .file-name { max-width: 150px; }
        }
    </style>
    
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
</head>
<body>

    <div class="container">
        <header>
            <h1>Merge PDF Files</h1>
            <p class="subtitle">Secure, Private, and 100% Offline.</p>
            <span class="badge">ðŸ”’ Files never leave your device</span>
        </header>

        <div class="drop-zone" id="drop-zone">
            <div class="drop-icon">ðŸ“‚</div>
            <p><strong>Click to Add PDFs</strong><br>or drag and drop files here</p>
            <input type="file" id="file-input" accept="application/pdf" multiple>
        </div>

        <div id="file-list-container"></div>

        <button id="merge-btn" class="btn-merge" onclick="mergePdfs()">
            <span>Combine PDFs Now</span>
        </button>
        <p id="status"></p>

        <div class="premium-card">
            <div class="premium-text">
                <h3>âš¡ Need to Edit or Sign PDFs?</h3>
                <p>For professional editing, e-signatures, and conversion to Word.</p>
            </div>
            
            <a href="https://www.adobe.com/acrobat/free-trial-download.html" 
               target="_blank" 
               rel="nofollow sponsored" 
               class="btn-affiliate">
               Try Adobe Acrobat Pro Free &rarr;
            </a>
        </div>
    </div>

    <footer>
        <p>&copy; 2024 Secure PDF Tools. No servers used. <br> Privacy First Architecture.</p>
    </footer>

    <script>
        const fileInput = document.getElementById('file-input');
        const fileListContainer = document.getElementById('file-list-container');
        const status = document.getElementById('status');
        const mergeBtn = document.getElementById('merge-btn');
        const dropZone = document.getElementById('drop-zone');

        // GLOBAL STATE to store files cumulatively
        let allFiles = []; 

        // Drag & Drop Visual Effects
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, preventDefaults, false);
        });
        function preventDefaults(e) { e.preventDefault(); e.stopPropagation(); }
        
        ['dragenter', 'dragover'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => dropZone.classList.add('dragover'), false);
        });
        ['dragleave', 'drop'].forEach(eventName => {
            dropZone.addEventListener(eventName, () => dropZone.classList.remove('dragover'), false);
        });

        // Handle File Selection (Click)
        fileInput.addEventListener('change', (e) => {
            addFiles(e.target.files);
            // Reset input so you can add the same file again if needed
            fileInput.value = ''; 
        });

        // Handle File Drop
        dropZone.addEventListener('drop', (e) => {
            const dt = e.dataTransfer;
            const files = dt.files;
            addFiles(files);
        });

        // Add files to our global list
        function addFiles(files) {
            let addedCount = 0;
            Array.from(files).forEach(file => {
                if (file.type === 'application/pdf') {
                    allFiles.push(file);
                    addedCount++;
                }
            });

            if (addedCount > 0) {
                renderFileList();
                status.textContent = "";
                status.className = "";
            } else {
                status.textContent = "âš ï¸ Please drop valid PDF files.";
                status.className = "error";
            }
        }

        // Render the list of files
        function renderFileList() {
            fileListContainer.innerHTML = '';
            
            if (allFiles.length === 0) {
                mergeBtn.disabled = false; // Optional: disable if empty
                return;
            }

            allFiles.forEach((file, index) => {
                const div = document.createElement('div');
                div.className = 'file-item';
                
                // Create File Info
                const infoDiv = document.createElement('div');
                infoDiv.className = 'file-info';
                infoDiv.innerHTML = `
                    <span>ðŸ“„</span>
                    <div>
                        <div class="file-name">${file.name}</div>
                        <div class="file-size">${(file.size/1024/1024).toFixed(2)} MB</div>
                    </div>
                `;

                // Create Delete Button
                const delBtn = document.createElement('button');
                delBtn.className = 'btn-delete';
                delBtn.innerHTML = '&times;';
                delBtn.onclick = () => removeFile(index);
                delBtn.title = "Remove file";

                div.appendChild(infoDiv);
                div.appendChild(delBtn);
                fileListContainer.appendChild(div);
            });
        }

        // Remove a file from the list
        function removeFile(index) {
            allFiles.splice(index, 1);
            renderFileList();
        }

        async function mergePdfs() {
            if (allFiles.length < 2) {
                status.textContent = "âš ï¸ Please add at least 2 PDF files to merge.";
                status.className = "error";
                return;
            }

            try {
                mergeBtn.disabled = true;
                mergeBtn.innerHTML = "â³ Processing...";
                status.textContent = "Working securely on your device...";
                status.className = "";

                const PDFDocument = PDFLib.PDFDocument;
                const mergedPdf = await PDFDocument.create();

                // Process files sequentially from our global array
                for (let file of allFiles) {
                    const arrayBuffer = await file.arrayBuffer();
                    const pdf = await PDFDocument.load(arrayBuffer);
                    const copiedPages = await mergedPdf.copyPages(pdf, pdf.getPageIndices());
                    copiedPages.forEach((page) => mergedPdf.addPage(page));
                }

                const pdfBytes = await mergedPdf.save();
                download(pdfBytes, "merged-document-secure.pdf", "application/pdf");
                
                status.textContent = "âœ… Success! Download started.";
                status.className = "success";
                mergeBtn.innerHTML = "Combine PDFs Now";
                mergeBtn.disabled = false;

            } catch (error) {
                console.error(error);
                status.textContent = "âŒ Error: One of the files is encrypted or corrupted.";
                status.className = "error";
                mergeBtn.innerHTML = "Try Again";
                mergeBtn.disabled = false;
            }
        }

        function download(data, filename, type) {
            const blob = new Blob([data], {type: type});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            setTimeout(() => {
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
            }, 100);
        }
    </script>
</body>
</html>
